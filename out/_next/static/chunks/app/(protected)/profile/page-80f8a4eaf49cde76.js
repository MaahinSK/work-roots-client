(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[551],{8764:function(e,t,r){Promise.resolve().then(r.bind(r,9432))},9432:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d},dynamic:function(){return u}});var a=r(7437),l=r(2265),o=r(8026),s=r(7061),n=r(8074),i=r(3464),c=r(5674);let u="force-dynamic";function d(){let[e,t]=(0,l.useState)({name:"",email:"",phone:"",profilePicture:""}),[r,u]=(0,l.useState)(!1),[d,m]=(0,l.useState)(!1),{currentUser:p,userProfile:f,updateUserProfile:h}=(0,o.a)();(0,l.useEffect)(()=>{f&&t({name:f.name||"",email:f.email||"",phone:f.phone||"",profilePicture:f.profilePicture||""})},[f]);let b=e=>{t(t=>({...t,[e.target.name]:e.target.value}))},x=async t=>{t.preventDefault(),m(!0);try{await i.Z.put("".concat("https://work-roots-server.vercel.app/","/auth/profile"),e,{headers:{Authorization:"Bearer ".concat(p.uid)}}),await h({displayName:e.name,photoURL:e.profilePicture}),s.Am.success("Profile updated successfully!")}catch(e){var r,a;s.Am.error("Failed to update profile: "+(null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.error))}finally{m(!1)}};return r?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)(n.Z,{})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,a.jsx)("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:"Profile Settings"}),(0,a.jsx)("div",{className:"flex flex-col items-center mb-8",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("img",{src:e.profilePicture||"/api/placeholder/150/150",alt:"Profile",className:"w-32 h-32 rounded-full object-cover border-4 border-gray-200"}),(0,a.jsx)("div",{className:"absolute bottom-0 right-0 bg-blue-500 rounded-full p-2",children:(0,a.jsx)(c.Dmm,{className:"text-white text-sm"})})]})}),(0,a.jsxs)("form",{onSubmit:x,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),(0,a.jsx)(c.Xws,{className:"absolute left-3 top-9 h-5 w-5 text-gray-400"}),(0,a.jsx)("input",{type:"text",id:"name",name:"name",required:!0,value:e.name,onChange:b,className:"mt-1 block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),(0,a.jsx)(c.SRX,{className:"absolute left-3 top-9 h-5 w-5 text-gray-400"}),(0,a.jsx)("input",{type:"email",id:"email",name:"email",required:!0,disabled:!0,value:e.email,className:"mt-1 block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm bg-gray-50 text-gray-500"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Email cannot be changed"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),(0,a.jsx)(c.I7T,{className:"absolute left-3 top-9 h-5 w-5 text-gray-400"}),(0,a.jsx)("input",{type:"tel",id:"phone",name:"phone",value:e.phone,onChange:b,className:"mt-1 block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"+1 (555) 123-4567"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"profilePicture",className:"block text-sm font-medium text-gray-700",children:"Profile Picture URL"}),(0,a.jsx)("input",{type:"url",id:"profilePicture",name:"profilePicture",value:e.profilePicture,onChange:b,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"https://example.com/photo.jpg"})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{type:"submit",disabled:d,className:"px-6 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:d?(0,a.jsx)(n.Z,{}):"Save Changes"})})]})]})})})}},8074:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var a=r(7437);function l(){return(0,a.jsx)("div",{className:"flex justify-center items-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})})}},8026:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return d},a:function(){return u}});var a=r(7437),l=r(2265),o=r(3301);let s=(0,r(738).ZF)({apiKey:"AIzaSyD2X6NJ1-zOk3WENlqPsXRQQ5VJ3IUNcMU",authDomain:"ejp-workroots.firebaseapp.com",projectId:"ejp-workroots",storageBucket:"ejp-workroots.firebasestorage.app",messagingSenderId:"151175727156",appId:"1:151175727156:web:425eea80bf9bd1bc9da261"}),n=(0,o.v0)(s);var i=r(3464);let c=(0,l.createContext)();function u(){return(0,l.useContext)(c)}function d(e){let{children:t}=e,[r,s]=(0,l.useState)(null),[u,d]=(0,l.useState)(!0),[m,p]=(0,l.useState)(null),f="https://work-roots-server.vercel.app/",h=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{await i.Z.post("".concat(f,"/auth/sync"),{uid:e.uid,name:e.displayName||t.name||"User",email:e.email,phone:t.phone||"",profilePicture:e.photoURL||t.profilePicture||""})}catch(e){console.error("Error syncing user to DB:",e)}},b=async(e,t,r)=>{let{user:a}=await (0,o.Xb)(n,e,t);return await (0,o.ck)(a,{displayName:r}),await h(a,{name:r}),a},x=async e=>{n.currentUser&&(await (0,o.ck)(n.currentUser,e),await h(n.currentUser,e))};return(0,l.useEffect)(()=>(0,o.Aj)(n,async e=>{if(s(e),e){await h(e);try{let t=await i.Z.get("".concat(f,"/auth/profile"),{headers:{Authorization:"Bearer ".concat(e.uid)}});p(t.data.data)}catch(e){console.error("Error fetching user profile:",e)}}else p(null);d(!1)}),[]),(0,a.jsx)(c.Provider,{value:{currentUser:r,userProfile:m,signup:b,login:(e,t)=>(0,o.e5)(n,e,t),logout:()=>(0,o.w7)(n),updateUserProfile:x},children:!u&&t})}},178:function(e,t,r){"use strict";r.d(t,{w_:function(){return i}});var a=r(2265),l={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},o=a.createContext&&a.createContext(l),s=function(){return(s=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var l in t=arguments[r])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)},n=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)0>t.indexOf(a[l])&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(r[a[l]]=e[a[l]]);return r};function i(e){return function(t){return a.createElement(c,s({attr:s({},e.attr)},t),function e(t){return t&&t.map(function(t,r){return a.createElement(t.tag,s({key:r},t.attr),e(t.child))})}(e.child))}}function c(e){var t=function(t){var r,l=e.attr,o=e.size,i=e.title,c=n(e,["attr","size","title"]),u=o||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),a.createElement("svg",s({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,l,c,{className:r,style:s(s({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),i&&a.createElement("title",null,i),e.children)};return void 0!==o?a.createElement(o.Consumer,null,function(e){return t(e)}):t(l)}}},function(e){e.O(0,[139,420,851,61,971,117,744],function(){return e(e.s=8764)}),_N_E=e.O()}]);