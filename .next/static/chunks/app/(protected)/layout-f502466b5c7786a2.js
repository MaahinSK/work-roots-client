(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[648],{9490:function(e,t,r){Promise.resolve().then(r.bind(r,3621))},3621:function(e,t,r){"use strict";r.d(t,{default:function(){return i}});var n=r(7437),a=r(8026),u=r(9376),o=r(2265),s=r(8074);function i(e){let{children:t}=e,{currentUser:r,loading:i}=(0,a.a)(),c=(0,u.useRouter)();return((0,o.useEffect)(()=>{i||r||c.push("/login")},[r,i,c]),i)?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsx)(s.Z,{})}):r?t:null}},8074:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(7437);function a(){return(0,n.jsx)("div",{className:"flex justify-center items-center",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})})}},8026:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return f},a:function(){return l}});var n=r(7437),a=r(2265),u=r(3301);let o=(0,r(738).ZF)({apiKey:"AIzaSyD2X6NJ1-zOk3WENlqPsXRQQ5VJ3IUNcMU",authDomain:"ejp-workroots.firebaseapp.com",projectId:"ejp-workroots",storageBucket:"ejp-workroots.firebasestorage.app",messagingSenderId:"151175727156",appId:"1:151175727156:web:425eea80bf9bd1bc9da261"}),s=(0,u.v0)(o);var i=r(3464);let c=(0,a.createContext)();function l(){return(0,a.useContext)(c)}function f(e){let{children:t}=e,[r,o]=(0,a.useState)(null),[l,f]=(0,a.useState)(!0),[d,p]=(0,a.useState)(null),h="https://work-roots-server.vercel.app/api",m=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{await i.Z.post("".concat(h,"/auth/sync"),{uid:e.uid,name:e.displayName||t.name||"User",email:e.email,phone:t.phone||"",profilePicture:e.photoURL||t.profilePicture||""})}catch(e){console.error("Error syncing user to DB:",e)}},w=async(e,t,r)=>{let{user:n}=await (0,u.Xb)(s,e,t);return await (0,u.ck)(n,{displayName:r}),await m(n,{name:r}),n},v=async e=>{s.currentUser&&(await (0,u.ck)(s.currentUser,e),await m(s.currentUser,e))};return(0,a.useEffect)(()=>(0,u.Aj)(s,async e=>{if(o(e),e){await m(e);try{let t=await i.Z.get("".concat(h,"/auth/profile"),{headers:{Authorization:"Bearer ".concat(e.uid)}});p(t.data.data)}catch(e){console.error("Error fetching user profile:",e)}}else p(null);f(!1)}),[]),(0,n.jsx)(c.Provider,{value:{currentUser:r,userProfile:d,signup:w,login:(e,t)=>(0,u.e5)(s,e,t),logout:()=>(0,u.w7)(s),updateUserProfile:v},children:!l&&t})}},9376:function(e,t,r){"use strict";var n=r(5475);r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})}},function(e){e.O(0,[139,851,971,117,744],function(){return e(e.s=9490)}),_N_E=e.O()}]);